<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://xamarin.com/schemas/2014/forms"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewModels="clr-namespace:Thunderstruck.UI.ViewModels;assembly=Thunderstruck.UI"
             xmlns:forecast="clr-namespace:Thunderstruck.UI.ViewModels.Forecast;assembly=Thunderstruck.UI"
             x:Class="Thunderstruck.UI.Views.Project.Forecast.ForecastTodayPage">
    <ContentPage.BindingContext>
        <forecast:ForecastTodayViewModel/>
    </ContentPage.BindingContext>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="20"/>
            <RowDefinition Height="200"/>
        </Grid.RowDefinitions>

        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="100"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <Label Margin="20,0" Grid.Row="0" Grid.ColumnSpan="2" Text="LOCATION" BackgroundColor="Aqua" HorizontalOptions="Center" VerticalOptions="Center"/>
        <Entry Margin="20,0" Grid.Row="1" Grid.ColumnSpan="2" x:Name="eEnterLocation" Placeholder="Enter a location" Text="{Binding EnteredLocation}" />
        <Button Grid.Row="2" Grid.ColumnSpan="2" x:Name="btnUseLocation" Text="Get Forecast for this location" Margin="50,0,50,0"  VerticalOptions="Center" Command="{Binding GetCurrentWeatherCommand}" />
        <Button Grid.Row="3" Grid.ColumnSpan="2" x:Name="btnUpdateLocation" Text="Update Current Location by gps"  Margin="50,0,50,0" Command="{Binding  GetCurrentLocationCommand}"/>
        <Editor Margin="20,0" Grid.Row="4" Grid.ColumnSpan="2" x:Name="eCurrentLocation" IsEnabled="false" Placeholder="Current GPS location will be visible here">
            <Editor.Text>
                <MultiBinding StringFormat="{} {0} {1} {2}">
                    <Binding Path="PhoneLocationMappedObject.LocationName"/>
                    <Binding Path="PhoneLocationMappedObject.XLongitude"/>
                    <Binding Path="PhoneLocationMappedObject.YLatitude"/>

                </MultiBinding>
            </Editor.Text>
        </Editor>

        <Label BackgroundColor="Chartreuse" Grid.Row="5"  Grid.Column="0" Grid.ColumnSpan="2" Text="FORECAST" HorizontalOptions="Center"/>
       
        <ScrollView Margin="20" Padding="10" BackgroundColor="Aquamarine" Grid.Row="6" Grid.ColumnSpan="2" >
            <StackLayout Orientation="Horizontal">
                <StackLayout>
                    <Label Text="Current weather in:"/>
                    <Label Text="Temperature: °c" />
                    <Label Text="Temperature feels like: °c "/>
                    <Label Text="Change of rain: %"/>
                    <Label Text="Humidity: % "/>
                    <Label Text="Pressure: hPa"/>
                    <Label Text="Cloud cover: %"/>
                    <Label Text="Wind: km/h"/>
                    <Label Text="Visibility (meter):"/>
                </StackLayout>

                <StackLayout BindingContext="{Binding CurrentWeather}">
                    <Label>
                        <Label.Text>
                            <MultiBinding StringFormat="{} {0} {1}">
                                <Binding Path="name"/>
                                <Binding Path="sys.country"/>
                            </MultiBinding>
                        </Label.Text>
                    </Label>
                    <Label  Text="{Binding main.temp}"/>
                    <Label  Text="{Binding main.feels_like}"/>
                    <Label  Text="{Binding rain._1h }"/>
                    <Label  Text="{Binding main.humidity}"/>
                    <Label  Text="{Binding main.pressure}"/>
                    <Label  Text="{Binding clouds.all}"/>
                    <Label Text="{Binding wind.speed}"/>
                    <Label Text="{Binding visibility}"/>

                </StackLayout>
            </StackLayout>


        </ScrollView>


    </Grid>
</ContentPage>